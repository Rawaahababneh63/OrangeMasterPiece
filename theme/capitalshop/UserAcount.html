<!DOCTYPE html>
<html class="no-js" lang="ar">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>دورنو - حسابي</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="DornoStyle/assets//img/favicon.ico" />
    <!-- CSS -->
    <link rel="stylesheet" href="DornoStyle/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/slick.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/magnific-popup.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/font.awesome.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/ionicons.min.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/animate.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/jquery-ui.min.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/slinky.menu.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/plugins.css" />
    <link rel="stylesheet" href="DornoStyle/assets/css/style.css" />
    <script src="DornoStyle/assets/js/vendor/modernizr-3.7.1.min.js"></script>
    <style>
        body {
            direction: rtl; /* تعيين اتجاه الكتابة إلى اليمين */
            text-align: right; /* محاذاة النص إلى اليمين */
        }
        .mt-2 {
    margin-top: .5rem !important;
    font-size: 140%;
}
img {
    max-width: 100%;
    height: 45VH;
    margin-bottom: 16px;
}
    </style>
</head>

<body>
    <!--header area start-->

    <!--header area end-->

    <!--breadcrumbs area start-->
    <div class="breadcrumbs_area">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumb_content">
                        <h3>حسابي</h3>
                        <ul>
                            <li><a href="index.html">الرئيسية</a></li>
                            <li>حسابي</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--breadcrumbs area end-->

    <!-- my account start  -->
    <section class="main_content_area">
        <div class="container">
            <div class="account_dashboard">
                <div class="row">
                    <div class="col-sm-12 col-md-3 col-lg-3">
                        <!-- Nav tabs -->
                        <div class="dashboard_tab_button">
                            <ul role="tablist" class="nav flex-column dashboard-list">
                                <li>
                                    <a href="#" data-bs-toggle="tab" class="nav-link active">لوحة التحكم</a>
                                </li>
                                <li>
                                    <a href="#orders" data-bs-toggle="tab" class="nav-link">الطلبات</a>
                                </li>
                                <li>
                                    <a href="#account-details" data-bs-toggle="tab" class="nav-link">تفاصيل الحساب</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-9 col-lg-9">
                        <!-- Tab panes -->
                        <div class="tab-content dashboard_content">
                            <div class="tab-pane fade show active" id="dashboard">
                                <h3>لوحة التحكم</h3>
                                <p>
                                    من لوحة التحكم الخاصة بك. يمكنك بسهولة التحقق من و
                                    <a href="#">الطلبات الأخيرة</a>، وإدارة
                                    <a href="#">عناوين الشحن والفواتير</a> و
                                    <a href="#">تعديل كلمة المرور وتفاصيل الحساب.</a>
                                </p>
                            </div>
                            <div class="tab-pane fade" id="orders">
                                <h3>الطلبات</h3>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>الاسم</th>
                                                <th>الإجمالي</th>
                                                <th>البريد الإلكتروني</th>
                                                <th>الحالة</th>
                                                <th>عرض</th>
                                            </tr>
                                        </thead>
                                        <tbody id="container">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="downloads">
                                <h3>التحميلات</h3>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>المنتج</th>
                                                <th>السعر</th>
                                                <th>العلامة التجارية</th>
                                                <th>الكمية</th>
                                                <th>تحميل</th>
                                            </tr>
                                        </thead>
                                        <tbody id="downloadsTable">
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="account-details">
                                <h3>تفاصيل الحساب</h3>
                                <div class="container-fluid">
                                    <div class="main-body" id="container11">
                                        <!-- بيانات المستخدم ستظهر هنا -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- my account end   -->

    <!--footer area start-->

    <!--footer area end-->

    <!-- JS -->
    <script src="DornoStyle/assets/js/vendor/jquery-3.4.1.min.js"></script>
    <script src="DornoStyle/assets/js/popper.js"></script>
    <script src="DornoStyle/assets/js/bootstrap.min.js"></script>
    <script src="DornoStyle/assets/js/owl.carousel.min.js"></script>
    <script src="DornoStyle/assets/js/slick.min.js"></script>
    <script src="DornoStyle/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="DornoStyle/assets/js/jquery.counterup.min.js"></script>
    <script src="DornoStyle/assets/js/jquery.countdown.js"></script>
    <script src="DornoStyle/assets/js/jquery.ui.js"></script>
    <script src="DornoStyle/assets/js/jquery.elevatezoom.js"></script>
    <script src="DornoStyle/assets/js/isotope.pkgd.min.js"></script>
    <script src="DornoStyle/assets/js/slinky.menu.js"></script>
    <script src="DornoStyle/assets/js/plugins.js"></script>
    <script src="JavaScript/navebar.js"></script>
    <script src="JavaScript/editUser.js"></script>
    <script src="JavaScript/miniCart.js"></script>
    <script src="DornoStyle/assets/js/main.js"></script>

    <script>
        function downloadExcel() {
            // Select the table element
            var wb = XLSX.utils.table_to_book(document.getElementById("downloadsTable"), {
                sheet: "Sheet1"
            });
            // Create an XLSX file from the workbook and save it
            XLSX.writeFile(wb, "downloads.xlsx");
        }
    </script>
  <script>
    async function GetUserData() {
        const UserId = localStorage.getItem("UserId");
        const url = `https://localhost:44332/api/Users/${UserId}`;

        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const result = await response.json();
            displayUserData(result);
        } catch (error) {
            console.error('حدث خطأ:', error);
            alert('حدث خطأ أثناء استرجاع بيانات المستخدم.');
        }
    }

    function displayUserData(user) {
        const container = document.getElementById('container11');
        container.innerHTML = `
            <div class="row gutters-sm">
                <div class="col-md-4 mb-3">
                    <div class="d-flex flex-column align-items-center">
    <img id="userImage" src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${user.image}" alt="Admin" class="profile-image">
    <h5 class="mt-2" id="userUsernameDisplay">${user.userName}</h5>
</div>

                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="mb-3">معلومات المستخدم</h6>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">الاسم الكامل</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userName">
                                    ${user.firstName} ${user.lastName}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">اسم المستخدم</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userUsername">
                                    ${user.userName}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">البريد الإلكتروني</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userEmail">
                                    ${user.email}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">رقم الهاتف</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userPhone">
                                    ${user.phoneNumber}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">العنوان</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userAddress">
                                    ${user.address}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">الجنس</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" id="userGender">
                                    ${user.gender}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12">
                                    <a class="btn btn-info" href="EditProfile.html">تعديل</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    GetUserData();
</script>

</body>
</html>
